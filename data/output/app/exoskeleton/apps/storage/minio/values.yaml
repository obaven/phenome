mode: standalone
global:
  security:
    allowInsecureImages: true

image:
  registry: public.ecr.aws
  repository: bitnami/minio
  tag: latest

console:
  enabled: false
replicas: 1
persistence:
  enabled: true
  storageClass: local-path
  size: 10Gi
resources:
  requests:
    memory: 512Mi
    cpu: 100m
auth:
  rootUser: "admin"
  rootPassword: "SuperSecureMinioPassword123!"
service:
  ports:
    api: 9000
    console: 9001
  
ingress:
  enabled: true
  hosts:
    - minio.obaven.org
  annotations:
    cert-manager.io/cluster-issuer: "cloudflare-dns-issuer"
apiIngress:
  enabled: true
  hosts:
    - s3.obaven.org
  annotations:
    cert-manager.io/cluster-issuer: "cloudflare-dns-issuer"

extraEnvVars:
  - name: MINIO_IDENTITY_OPENID_CONFIG_URL
    value: "https://auth.obaven.org/.well-known/openid-configuration"
  - name: MINIO_IDENTITY_OPENID_CLIENT_ID
    value: "minio"
  - name: MINIO_IDENTITY_OPENID_CLIENT_SECRET
    valueFrom:
      secretKeyRef:
        name: minio-oidc-creds
        key: minio_client_secret
  - name: MINIO_IDENTITY_OPENID_DISPLAY_NAME
    value: "SSO"
  - name: MINIO_IDENTITY_OPENID_SCOPES
    value: "openid,profile,email,groups"
